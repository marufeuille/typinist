# Typinist - 要件定義書

## プロジェクト概要

**プロジェクト名:** Typinist
**対象年齢:** 小学生（8〜9歳）
**目的:** ローマ字タイピング練習 × プログラミング的思考の導入

### 背景
Scratchの手前の段階として、ローマ字タイピング練習を主目的とするWebアプリ。キャラクターへの指示をローマ字で打つことで、タイピング練習とプログラミング的思考を自然に体験できる体験を提供する。

---

## ターゲットユーザー・開発思想

- **主対象:** 小学3〜4年生（8〜9歳）
- **前提スキル:** ひらがな読み書き可能、ローマ字の基本を学習中
- **開発思想:**
  - 「楽しい」を最優先：ゲーム感覚でタイピングを練習
  - 「わかりやすい」：直感的なUI、難しい漢字を使わない
  - 「達成感がある」：ゴール到達のクリア演出
  - ScratchとなぞりBOTの間のポジション

---

## 機能要件

### 段階的設計（Step別）

#### Step 1（MVP）- ゴール誘導モード
- グリッド上のキャラクターをローマ字コマンドで操作
- 3つのコマンド：まえにすすむ、みぎをむく、ひだりをむく
- 5x5グリッド（固定）
- コマンドパレットからコマンドを選択してタイピング
- ゴール到達でクリア表示

#### Step 2（将来）- 2モード実装
- モードA（お絵かき）：ペン軌跡でお題の絵を描く
- モードB（ゴール誘導）：障害物避けてゴールへ
- ペンコマンド追加：ペンをあげる/おろす、ペンのいろをかえる

#### Step 3（将来）- 自然言語入力
- ダミーLLMによるキーワードマッチング
- より自然な日本語での指示入力

#### Step 4（将来）- 強化UI
- ローマ字ヒントUI
- タイピング統計（打鍵数・正答率）
- キャラクターイラスト差し替え

### 2つの入力モード
1. **写経モード（Lv.1）:** 推奨コマンド順序が提示され、そのまま打つ
2. **自由モード（Lv.2+）:** コマンドパレットから自分で選択して打つ

### ローマ字タイピング仕様
- 1文字ずつリアルタイム判定
- 正解キー：緑ハイライト
- 不正解キー：赤フラッシュ（ペナルティなし）
- 複数入力パターン対応：
  - 「し」→ "si" or "shi"
  - 「つ」→ "tu" or "tsu"
  - 「ち」→ "ti" or "chi"
  - 「っ」→ 子音の重ね打ち対応

### コマンド体系（Step 1 MVP）

| コマンド | 日本語 | ローマ字 | アクション |
|---|---|---|---|
| まえにすすむ | 前に1マス進む | maenisusuumu | 現在の向きの方向に1マス移動 |
| みぎをむく | 右を向く | migiwomuku | 時計回りに90°回転 |
| ひだりをむく | 左を向く | hidariwomuku | 反時計回りに90°回転 |

---

## 非機能要件

- **PC専用優先:** キーボード入力が必須のためPC優先
- **レスポンシブ対応:** 画面幅が狭い場合、縦並びレイアウトに切り替え
- **時間制限なし:** プレッシャーを与えない設計
- **音響:** BGM・効果音は将来実装
- **ローカルストレージ:** 学習記録は将来実装
- **アクセシビリティ:** フォントサイズ大きめ、コントラスト確保

---

## MVP（Step 1）スコープ定義

### IN スコープ
- 5x5グリッド表示
- キャラクター（三角形矢印）描画
- ゴール（星マーク）描画
- 3コマンド（まえにすすむ・みぎをむく・ひだりをむく）
- ローマ字タイピングエンジン（複数パターン対応）
- コマンドパレット（選択UI）
- コマンド実行後のスムーズアニメーション（200〜300ms）
- ゴール到達でクリア表示
- リセット機能
- 3〜5ステージのレベルデータ
- 写経モード（推奨コマンド自動提示）
- ユニットテスト（typingEngine, commands, gameState）

### OUT スコープ（将来）
- ペンコマンド（ペンをあげる/おろす）
- 障害物
- 複数歩移動（○ほすすむ）
- 自然言語入力
- 音響
- ローカルストレージ永続化
- ステージ選択UI（高度なもの）
- タイピング統計

---

## 将来ステップ（概要）

| Step | 内容 |
|---|---|
| Step 2 | モードA/B、ペンコマンド、お題データ、クリア判定 |
| Step 3 | 自然言語入力（ダミーLLMキーワードマッチング） |
| Step 4 | ローマ字ヒントUI、統計機能、ビジュアル強化 |
| Step 5+ | localStorage、マルチプレイヤー、バックエンド |
