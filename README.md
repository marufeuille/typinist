# Typinist

小学生（8〜9歳）向けの**ローマ字タイピング × プログラミング導入**Webアプリ。

グリッド上のキャラクターに「まえにすすむ」などのコマンドをローマ字で打って操作し、ゴールまで導く。「Scratchの手前」を意識した、タイピング練習とプログラミング的思考を自然に体験できるゲームです。

---

## スクリーンショット

```
┌─────────────────────────────────────────┐
│  [Typinist]   ステージ1   手数 4  ↩ ↪  │
├──────────────────────┬──────────────────┤
│                      │  コマンド一覧:   │
│   ┌──┬──┬──┬──┬──┐   │  ▶ まえにすすむ  │
│   │  │  │  │  │☆│   │  ↷ みぎをむく   │
│   ├──┼──┼──┼──┼──┤   │  ↶ ひだりをむく │
│   │  │  │  │  │  │   │                 │
│   ├──┼──┼──┼──┼──┤   │                 │
│   │▶─┼──┼──┼──┤  │   │                 │
│   └──┴──┴──┴──┴──┘   │                 │
│                      │                 │
├──────────────────────┴──────────────────┤
│  まえにすすむ                            │
│  [m][a][e][n][i][s][u][s][u][m][u]      │
│  にゅうりょく: ma_                       │
└─────────────────────────────────────────┘
```

---

## 機能（Step 1 MVP）

- **5×5 グリッド**上でキャラクターを操作
- **3つのコマンド**：まえにすすむ・みぎをむく・ひだりをむく
- **ローマ字タイピング**：1キーずつリアルタイム判定、正誤フィードバック付き
  - 複数入力パターン対応（「し」→ `si` / `shi`、「つ」→ `tu` / `tsu` など）
  - 次に押すキーをハイライト表示
- **スムーズアニメーション**（移動 250ms・回転 150ms）
- **手数カウンター**：何手使ったか常時表示
- **Undo / Redo**：コマンド実行を1手ずつ戻せる・やり直せる
- **5ステージ**（やさしい順）
- **クリア画面**：「N手でクリア」を表示

---

## 技術スタック

| 項目 | 選定 |
|---|---|
| フレームワーク | React 19 + TypeScript |
| ビルドツール | Vite |
| 描画 | HTML5 Canvas (raw) |
| 状態管理 | Zustand |
| CSS | CSS Modules |
| テスト | Vitest |

---

## セットアップ

```bash
npm install
npm run dev
```

ブラウザで http://localhost:5173 を開く。

---

## コマンド一覧

```bash
npm run dev        # 開発サーバー起動
npm run build      # プロダクションビルド
npm run test       # ユニットテスト実行
npm run test:watch # テストをウォッチモードで実行
npm run preview    # ビルド結果のプレビュー
```

---

## プロジェクト構成

```
src/
├── components/
│   ├── GameCanvas/      # グリッド・キャラクター・軌跡の Canvas 描画
│   ├── CommandPalette/  # コマンド選択 UI
│   ├── TypingInput/     # ローマ字タイピング入力エリア
│   └── GameHeader/      # ヘッダー（手数・Undo/Redo・リセット）
├── engine/
│   ├── gameState.ts     # Zustand store（ゲーム状態・Undo/Redo 履歴）
│   ├── commands.ts      # コマンド定義
│   ├── grid.ts          # グリッド座標ユーティリティ
│   └── animation.ts     # requestAnimationFrame ベースのアニメーションキュー
├── typing/
│   ├── romajiMap.ts     # ひらがな → ローマ字マッピング（複数パターン対応）
│   └── typingEngine.ts  # 入力判定エンジン
├── data/
│   └── levels.ts        # レベルデータ（5ステージ）
└── types/
    └── index.ts         # 共通型定義
```

---

## 将来のステップ

| Step | 内容 |
|---|---|
| Step 2 | ペンコマンド（ペンをあげる/おろす）、障害物、モードA（お絵かき） |
| Step 3 | 自然言語入力（キーワードマッチング） |
| Step 4 | タイピング統計、ローマ字ヒント強化、キャラクターイラスト |
| Step 5+ | localStorage による学習記録、ステージエディタ |
