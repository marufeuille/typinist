/**
 * ひらがな1文字に対する受け入れローマ字パターン定義
 * 各エントリは string[][] = 受け入れ可能なローマ字シーケンスの配列
 * 最初の要素がデフォルト表示用
 */
export const ROMAJI_PATTERNS: Record<string, string[][]> = {
  // あ行
  'あ': [['a']],
  'い': [['i']],
  'う': [['u']],
  'え': [['e']],
  'お': [['o']],
  // か行
  'か': [['k','a']],
  'き': [['k','i']],
  'く': [['k','u']],
  'け': [['k','e']],
  'こ': [['k','o']],
  // さ行
  'さ': [['s','a']],
  'し': [['s','i'], ['s','h','i']],
  'す': [['s','u']],
  'せ': [['s','e']],
  'そ': [['s','o']],
  // た行
  'た': [['t','a']],
  'ち': [['t','i'], ['c','h','i']],
  'つ': [['t','u'], ['t','s','u']],
  'て': [['t','e']],
  'と': [['t','o']],
  // な行
  'な': [['n','a']],
  'に': [['n','i']],
  'ぬ': [['n','u']],
  'ね': [['n','e']],
  'の': [['n','o']],
  // は行
  'は': [['h','a']],
  'ひ': [['h','i']],
  'ふ': [['f','u'], ['h','u']],
  'へ': [['h','e']],
  'ほ': [['h','o']],
  // ま行
  'ま': [['m','a']],
  'み': [['m','i']],
  'む': [['m','u']],
  'め': [['m','e']],
  'も': [['m','o']],
  // や行
  'や': [['y','a']],
  'ゆ': [['y','u']],
  'よ': [['y','o']],
  // ら行
  'ら': [['r','a']],
  'り': [['r','i']],
  'る': [['r','u']],
  'れ': [['r','e']],
  'ろ': [['r','o']],
  // わ行
  'わ': [['w','a']],
  'ゐ': [['w','i']],
  'ゑ': [['w','e']],
  'を': [['w','o']],
  'ん': [['n','n']],
  // が行
  'が': [['g','a']],
  'ぎ': [['g','i']],
  'ぐ': [['g','u']],
  'げ': [['g','e']],
  'ご': [['g','o']],
  // ざ行
  'ざ': [['z','a']],
  'じ': [['z','i'], ['j','i']],
  'ず': [['z','u']],
  'ぜ': [['z','e']],
  'ぞ': [['z','o']],
  // だ行
  'だ': [['d','a']],
  'ぢ': [['d','i']],
  'づ': [['d','u']],
  'で': [['d','e']],
  'ど': [['d','o']],
  // ば行
  'ば': [['b','a']],
  'び': [['b','i']],
  'ぶ': [['b','u']],
  'べ': [['b','e']],
  'ぼ': [['b','o']],
  // ぱ行
  'ぱ': [['p','a']],
  'ぴ': [['p','i']],
  'ぷ': [['p','u']],
  'ぺ': [['p','e']],
  'ぽ': [['p','o']],
  // 小文字・拗音
  'っ': [['x','t','u'], ['l','t','u']],  // 子音重ねは typingEngine で特別処理
  'ぁ': [['x','a'], ['l','a']],
  'ぃ': [['x','i'], ['l','i']],
  'ぅ': [['x','u'], ['l','u']],
  'ぇ': [['x','e'], ['l','e']],
  'ぉ': [['x','o'], ['l','o']],
};

/**
 * ひらがな文字列をローマ字のシーケンスに変換する（デフォルトパターン）
 * 例: 'まえにすすむ' → ['m','a','e','n','i','s','u','s','u','m','u']
 */
export function hiraganaToDefaultRomaji(hiragana: string): string[] {
  const result: string[] = [];
  const chars = Array.from(hiragana);
  for (const char of chars) {
    const patterns = ROMAJI_PATTERNS[char];
    if (patterns && patterns.length > 0) {
      result.push(...patterns[0]);
    }
  }
  return result;
}

/**
 * ひらがな1文字の受け入れローマ字パターン一覧を返す
 */
export function getPatternsFor(char: string): string[][] {
  return ROMAJI_PATTERNS[char] ?? [];
}
